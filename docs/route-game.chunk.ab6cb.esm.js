(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{s3F4:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var i=n("hosL");const s=["Gripe","Covid 19","Pnemonia"],a=()=>{const t=[...s];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t};class r extends i.Component{constructor(...t){super(...t),this.state={timer:null,time:null,gameState:"pending",questionIndex:0,questions:[],nexting:!1},this.startGame=()=>{"running"===this.state.gameState&&this.stopGame("restarting"),this.setState({gameState:"starting",time:63,timer:window.setTimeout(this.tick,1e3),questions:a(),questionIndex:0},this.requestAccelerometer)},this.stopGame=(t="ended")=>{this.state.timer&&window.clearTimeout(this.state.timer),this.setState({gameState:t,time:null,timer:null},()=>{this.tada(),this.stopAccelerometer()})},this.tick=()=>{if(this.state.time){this.state.time-60==1&&this.setState({gameState:"running"}),this.setState({time:this.state.time-1,timer:window.setTimeout(this.tick,1e3)})}else this.stopGame()},this.next=()=>{this.setState(({questionIndex:t})=>({questionIndex:t+1}),this.ding)},this.move=t=>{const e=Math.abs(t.gamma)<15,{nexting:n,gameState:i}=this.state;e&&!n&&"running"===i?this.setState({nexting:!0},this.next):!e&&n&&this.setState({nexting:!1})},this.requestAccelerometer=()=>{"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(t=>{"granted"===t&&this.startAccelerometer()}).catch(console.error):this.startAccelerometer()},this.startAccelerometer=()=>{window.addEventListener("deviceorientation",this.move,!0)},this.stopAccelerometer=()=>{window.removeEventListener("deviceorientation",this.move,!0)},this.ding=()=>{this.playSound(document.getElementById("ding"))},this.tada=()=>{this.playSound(document.getElementById("tada"))},this.playSound=t=>{t&&(t.pause(),t.currentTime=0,t.play())},this.renderEndState=()=>Object(i.h)("div",{class:"game game--ended"},Object(i.h)("h2",null,"Acabou o Tempo!"),Object(i.h)("button",{type:"button",class:"button",onClick:()=>this.startGame()},"Jogar de novo")),this.renderPendingState=()=>Object(i.h)("div",{class:"game game--pending"},Object(i.h)("h2",null,"Pronto para começar?"),Object(i.h)("button",{type:"button",class:"button",onClick:()=>this.startGame()},"Iniciar")),this.renderRunningState=()=>{const{time:t,questions:e,questionIndex:n}=this.state,s=e[n];return Object(i.h)("div",{class:"game game--running"},Object(i.h)("h2",{class:"question"},s||Object(i.h)("span",null," ")),Object(i.h)("time",null,t),Object(i.h)("div",null,Object(i.h)("button",{type:"button",class:"button button--small",onClick:()=>this.next()},"Próximo"),Object(i.h)("button",{type:"button",class:"button button--small",onClick:()=>this.stopGame()},"Parar")))},this.renderStartingState=()=>{const t=this.state.time-60;return Object(i.h)("div",{class:"game game--starting"},Object(i.h)("h2",null,"Iniciando em: ",t))}}componentWillUnmount(){this.stopAccelerometer()}render(t,{gameState:e}){switch(e){case"ended":return this.renderEndState();case"pending":return this.renderPendingState();case"starting":return this.renderStartingState();case"running":return this.renderRunningState()}return null}}}}]);
//# sourceMappingURL=route-game.chunk.ab6cb.esm.js.map